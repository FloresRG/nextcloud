---
interface Props { title: string; }
const { title } = Astro.props;
---
<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta name="theme-color" content="#0082c9" />
    <title>{title} ‚Ä¢ Nextcloud Uploader</title>
    <style>
      :root { --primary:#0082c9; --bg:#f0f2f5; --card:#fff; --text:#1a1a1a; --text-secondary:#666; --border:#e0e0e0; --success:#46ba61; --error:#e74c3c; }
      * { box-sizing:border-box; -webkit-tap-highlight-color:transparent; }
      body { font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif; background:var(--bg); color:var(--text); margin:0; padding:0; min-height:100vh; }
      .header { background:var(--primary); color:#fff; padding:1rem 1.5rem; position:sticky; top:0; z-index:100; box-shadow:0 2px 10px rgba(0,0,0,.1); }
      .header h1 { margin:0; font-size:1.25rem; font-weight:600; }
      .breadcrumb { background:var(--card); padding:.75rem 1.5rem; border-bottom:1px solid var(--border); display:flex; flex-wrap:wrap; gap:.5rem; font-size:.9rem; position:sticky; top:64px; z-index:99; }
      .breadcrumb-item { color:var(--primary); cursor:pointer; padding:.25rem .5rem; border-radius:4px; background:#e8f4fd; }
      .breadcrumb-item:hover { background:var(--primary); color:#fff; }
      .breadcrumb-current { color:var(--text); font-weight:600; }
      .actions { display:flex; gap:.75rem; padding:1rem 1.5rem; background:var(--card); border-bottom:1px solid var(--border); position:sticky; top:110px; z-index:98; }
      .btn { flex:1; padding:.875rem; border:none; border-radius:10px; font-size:.95rem; font-weight:600; cursor:pointer; display:flex; align-items:center; justify-content:center; gap:.5rem; background:var(--primary); color:#fff; }
      .btn:active { transform:scale(.98); }
      .btn-secondary { background:#6c757d; }
      .btn-success { background:var(--success); }
      .btn:disabled { background:#ccc; cursor:not-allowed; }
      .file-grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(100px,1fr)); gap:1rem; padding:1.5rem; }
      .file-item { background:var(--card); border-radius:12px; padding:1rem .75rem; text-align:center; cursor:pointer; border:1px solid var(--border); }
      .file-item:active { transform:scale(.96); }
      .file-icon { font-size:2.5rem; margin-bottom:.5rem; display:block; }
      .file-name { font-size:.8rem; word-break:break-word; line-height:1.3; max-height:2.6em; overflow:hidden; }
      .file-info { font-size:.7rem; color:var(--text-secondary); margin-top:.25rem; }
      .empty-state { text-align:center; padding:3rem 1rem; color:var(--text-secondary); grid-column:1/-1; }
      .empty-state .icon { font-size:3rem; margin-bottom:1rem; opacity:.5; }
      .modal-overlay { position:fixed; top:0; left:0; right:0; bottom:0; background:rgba(0,0,0,.5); display:none; align-items:center; justify-content:center; z-index:1000; padding:1rem; }
      .modal-overlay.active { display:flex; }
      .modal { background:var(--card); border-radius:16px; padding:1.5rem; width:100%; max-width:400px; }
      .modal h3 { margin:0 0 1rem; color:var(--primary); }
      .modal input { width:100%; padding:.875rem; border:2px solid var(--border); border-radius:10px; font-size:1rem; margin-bottom:1rem; }
      .modal-actions { display:flex; gap:.75rem; }
      .modal-btn { flex:1; padding:.875rem; border:none; border-radius:10px; font-weight:600; cursor:pointer; }
      .modal-btn-cancel { background:#e0e0e0; color:#333; }
      .modal-btn-confirm { background:var(--primary); color:#fff; }
      .progress-bar { height:12px; background:#e0e0e0; border-radius:6px; overflow:hidden; margin:1rem 0; }
      .progress-fill { height:100%; background:var(--primary); width:0%; transition:width .3s; }
      .toast { position:fixed; bottom:2rem; left:50%; transform:translateX(-50%) translateY(100px); background:#333; color:#fff; padding:.75rem 1.5rem; border-radius:50px; font-size:.9rem; opacity:0; transition:all .3s; z-index:2000; }
      .toast.show { transform:translateX(-50%) translateY(0); opacity:1; }
      .toast.success { background:var(--success); }
      .toast.error { background:var(--error); }
      .loading { display:inline-block; width:1.25rem; height:1.25rem; border:3px solid rgba(255,255,255,.3); border-radius:50%; border-top-color:#fff; animation:spin 1s linear infinite; }
      @keyframes spin { to { transform:rotate(360deg); } }
      #fileInput { display:none; }
    </style>
  </head>
  <body>
    <header class="header"><h1>üìÅ Nextcloud Uploader</h1></header>
    <slot />
    <div class="toast" id="toast"></div>
    <input type="file" id="fileInput" multiple accept="video/*,image/*,application/*" />
    <script>
      function showToast(msg, type='success') { const t=document.getElementById('toast'); t.textContent=msg; t.className=`toast ${type} show`; setTimeout(()=>{t.className='toast';},3000); }
      function formatBytes(b) { if(b===0) return '0 B'; const k=1024, sizes=['B','KB','MB','GB'], i=Math.floor(Math.log(b)/Math.log(k)); return parseFloat((b/Math.pow(k,i)).toFixed(1))+' '+sizes[i]; }
      function getFileIcon(name,isFolder,mime='') { if(isFolder) return 'üìÅ'; const l=name.toLowerCase(); if(mime.includes('video')||/\.(mp4|avi|mov|mkv)$/.test(l)) return 'üé¨'; if(mime.includes('image')||/\.(jpg|jpeg|png|gif)$/.test(l)) return 'üñºÔ∏è'; if(mime.includes('audio')||/\.(mp3|wav)$/.test(l)) return 'üéµ'; if(mime.includes('pdf')||l.endsWith('.pdf')) return 'üìÑ'; return 'üìÑ'; }
      function escapeHtml(t) { const d=document.createElement('div'); d.textContent=t; return d.innerHTML; }
    </script>
  </body>
</html>